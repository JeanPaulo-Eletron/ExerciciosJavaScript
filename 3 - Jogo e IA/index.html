<html>
    <head>
        <title>El√©tron</title>
        <style>
            canvas{ 
                border: solid 2px; 
                height: 400px;
                width: 400px;
            }
        </style>
    </head>
    <body>
        <canvas></canvas>  
        <script>
          var changeStates = true;
          var cnv = document.querySelector("canvas");
          var ctx = cnv.getContext("2d");
          var player1 = {
            x: 15,
            y: 10
          };
          window.addEventListener("keydown",keyDownHandler);
          var direita  = ()=>{player1.x = player1.x + 1} 
          var esquerda = ()=>{player1.x = player1.x - 1}
          var cima     = ()=>{player1.y = player1.y + 1}
          var baixo    = ()=>{player1.y = player1.y - 1}
          var teclasDeMovimentacao = [39,68,37,65,40,83,38,87];
            
          update();
            
          function keyDownHandler(e){
            if(e.keyCode == 39 || e.keyCode == 68)
                direita();  
                else
            if(e.keyCode == 37 || e.keyCode == 65)
                esquerda();
                else
            if(e.keyCode == 40 || e.keyCode == 83)
                cima();
                else
            if(e.keyCode == 38 || e.keyCode == 87)
                baixo();
            teclasDeMovimentacao.forEach((item, index)=>{ 
                                        if(item == e.keyCode)
                                            changeStates = true
            });
          }
            
          function render(){
              ctx.clearRect(0, 0, cnv.width, cnv.height);
              ctx.fillRect(player1.x, player1.y, 50,25);
              changeStates = false;
          }
            
          function update(){
            requestAnimationFrame(update, cnv);
            if (changeStates)
                render();
          }
        </script>
    </body>
</html>